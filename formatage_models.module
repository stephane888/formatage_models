<?php
use Drupal\formatage_models\FormatageModelsThemes;
use Stephane888\Debug\debugLog;
use Drupal\Core\Url;
use Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException;
use Drupal\Component\DependencyInjection\Container;

/**
 *
 * @file
 * Primary module hooks for formatage models module.
 *
 * @DCG
 * This file is no longer required in Drupal 8.
 * @see https://www.drupal.org/node/2217931
 */

/**
 * Implement hook_preprocess_page
 */
function formatage_models_preprocess_page(&$variables) {
  // $Markup = new Markup();
  // $Markup->__toString()
  // if (! empty($variables['page']['content'])) {
  // foreach ( $variables['page']['content'] as $block ) {
  // if (is_array($block) && ! empty($block["#theme"]) && $block["#theme"] ==
  // 'block')
  // FormatageModelsThemes::ReInjectLayoutInAnotherRegion($block["#block"],
  // $variables);
  // }
  // }
  // dump($variables['page']['content']);
  // MdbootstrapWbu::wbupreprocess_page($variables);
  // $Container = \Drupal::getContainer()->getServiceIds();
  // $listes = array_keys($listes);
  // dump(implode(" , ", $listes));
  // $Container = \Drupal::service("validation.constraint");
  // dump($Container);
  
  // ***********
  // $Markup = new Markup();
  // $Markup->__toString()
  // if (! empty($variables['page']['content'])) {
  // foreach ( $variables['page']['content'] as $block ) {
  // if (is_array($block) && ! empty($block["#theme"]) && $block["#theme"] ==
  // 'block')
  // FormatageModelsThemes::ReInjectLayoutInAnotherRegion($block["#block"],
  // $variables);
  // }
  // }
  // dump($variables['page']['content']);
  // MdbootstrapWbu::wbupreprocess_page($variables);
  // $listes = \Drupal::service('validation.constraint')->getDefinitions();
  // $listes = array_keys($listes);
  // dump($listes);
  // $Container = new Container();
  // dump($Container->getServiceIds());
}

function formatage_models_preprocess_menu__extras(&$vars) {
  if (!empty($vars['menu_name']) && $vars['menu_name'] == "main") {
    foreach ($vars['items'] as $item) {
      //
    }
  }
}

/**
 * Implements hook_menu_alter().
 */
function formatage_models_link_alter(&$vars) {
  // /**
  // * The URL of the link.
  // *
  // * @var Url $url
  // */
  // $url = $vars['url'];
  // if ($url->isRouted()){
  // $url->
  
  // }
  // dump($url->getRouteName());
  // // debugLog::kintDebugDrupal($vars, 'formatage_models_link_alter' . rand(1,
  // 9999));
}

/**
 * Implement hook__layouts
 */
function formatage_models_preprocess_layout(&$vars) {
  if (!empty($vars['region_attributes'])) {
    foreach ($vars['region_attributes'] as $key => $region_attribute) {
      $vars['region_attributes'][$key]->addClass('layout-region');
    }
  }
  // if ($vars['theme_hook_original'] == 'blb_section')
  // dump($vars);
}

function formatage_models_preprocess_formatage_models_teaser_small(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_preprocess_formatage_models_textcotebg(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_preprocess_formatage_models_description(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_preprocess_formatage_models_empty_results(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_page_bigbackground(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

/**
 * Implement hook__layouts
 */
function formatage_models_preprocess_blb_section(&$vars) {
  if (!empty($vars['region_attributes'])) {
    foreach ($vars['region_attributes'] as $key => $region_attribute) {
      $vars['region_attributes'][$key]->addClass('layout-region');
    }
  }
  // if ($vars['theme_hook_original'] == 'blb_section')
  // dump($vars);
}

/**
 * Implements hook_theme().
 */
function formatage_models_theme() {
  return FormatageModelsThemes::getThemeHooks();
}

function formatage_models_preprocess_formatage_models_footer1(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_preprocess_formatage_models_comments(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_preprocess_formatage_models_titre_description(array &$variables) {
  // dump($variables);
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::mergeContentAttributes($variables);
}

function formatage_models_preprocess_formatage_models_header1(&$vars) {
  FormatageModelsThemes::mergeContentAttributes($vars);
}

function formatage_models_preprocess_formatage_models_hero_thegem_18(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_header_thegem_01(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_single_blog(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_item_section(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  // FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_images_bg(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  // FormatageModelsThemes::ApplyAttributes($variables);
  FormatageModelsThemes::mergeContentAttributes($variables);
}

function formatage_models_preprocess_formatage_models_services_sliders(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_titre(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
  FormatageModelsThemes::mergeContentAttributes($variables);
}

function formatage_models_preprocess_formatage_models_lmsg_call_toaction(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_service_icone(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
  FormatageModelsThemes::mergeContentAttributes($variables);
}

function formatage_models_preprocess_formatage_models_expert_solution(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_image_after_before(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_hero_slider_popup(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

function formatage_models_preprocess_formatage_models_simple_block(array &$variables) {
  // FormatageModelsThemes::ApplyAttributes($variables);
  // FormatageModelsThemes::addLayoutEditBlock($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_galery_title(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_teaser_img_desc(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_blog_list(array &$variables) {
  FormatageModelsThemes::ApplyAttributes($variables);
  // FormatageModelsThemes::addLayoutEditBlock($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_article_header(array &$variables) {
  FormatageModelsThemes::ApplyAttributes($variables);
  // FormatageModelsThemes::addLayoutEditBlock($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_teaser(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_teaser_a_la_une(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_realisation_big(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_realisation_small(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}

/**
 *
 * @param array $variables
 */
function formatage_models_preprocess_formatage_models_bg_header(array &$variables) {
  // FormatageModelsThemes::addLayoutEditBlock($variables);
  FormatageModelsThemes::ApplyAttributes($variables);
}